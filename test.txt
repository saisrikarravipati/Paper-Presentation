# Exact match status lookup using precomputed sanitized names
jira_test_case_statuses[test_case] := status if {
    test_case := unique_jira_test_cases[_]
    status := sevenps_entry[test_case]
}

# Sanitized name match fallback
jira_test_case_statuses[test_case] := status if {
    test_case := unique_jira_test_cases[_]
    not sevenps_entry[test_case]  # Only if exact match not found
    sanitized := sanitize_test_names(test_case)
    status := sanitized_sevenps_entry[sanitized][_]
}

# Regex match fallback with pre-indexed sanitized names
jira_test_case_statuses[test_case] := status if {
    test_case := unique_jira_test_cases[_]
    not sevenps_entry[test_case]
    not sanitized_sevenps_entry[sanitize_test_names(test_case)]
    
    sanitized_test := sanitize_test_names(test_case)
    some key in keys(sanitized_sevenps_entry)
    match_test_names(sanitized_test, key)
    status := sanitized_sevenps_entry[key][_]
}
