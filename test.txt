results["missing_id_automated"] := missing_test_case_id {
    count(missing_test_case_id) > 0
} else := ""

results["missing_jira_ids"] := missing_jira_ids { 
    count(missing_jira_ids) > 0 
} else := []

results["decision"] := "PASS" {
    count(missing_test_case_id) == 0
    count(missing_jira_ids) == 0
} else := "FAIL"

results["total_traceability_tests"] := test_count { 
    test_count := count(unique_jira_test_cases) 
} else := 0

results["valid_traceability_tests"] := valid_count {
    valid_count := count(unique_jira_test_cases) - count(missing_test_case_id)
} else := 0
